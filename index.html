<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>安全閥計算器</title>
    <style>
        :root { --bg: #f2f2f7; --card: #fff; --blue: #007aff; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); padding: 20px; margin: 0; }
        .card { background: var(--card); padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: 600; }
        input { width: 100%; padding: 15px; border: 1px solid #d1d1d6; border-radius: 10px; font-size: 20px; box-sizing: border-box; margin-bottom: 15px; }
        button { width: 100%; padding: 16px; background: var(--blue); color: #fff; border: none; border-radius: 10px; font-size: 18px; font-weight: 600; }
        .res { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 0.5px solid #eee; }
        .val { font-weight: 700; color: #ff3b30; }
        .hi { background: #fff9c4; margin: 10px -20px -20px; padding: 20px; border-radius: 0 0 15px 15px; border-top: 2px solid #fc0; }
    </style>
</head>
<body>
    <div style="max-width:400px; margin:0 auto;">
        <h2 style="text-align:center;">安全閥性能計算</h2>
        <div class="card">
            <label>銘牌設定壓力 (Ps)</label>
            <input type="number" id="ps" value="30" inputmode="decimal">
            <label>初噴壓力 (Pi)</label>
            <input type="number" id="pi" value="30" inputmode="decimal">
            <button onclick="calc()">執行計算</button>
        </div>
        <div class="card">
            <div class="res"><span>初噴範圍(±3%)</span><span class="val" id="r1">--</span></div>
            <div class="res"><span>過壓壓力(10%)</span><span class="val" id="r2">--</span></div>
            <div class="res"><span>釋放壓力(Pi+過壓)</span><span class="val" id="r3">--</span></div>
            <div class="res"><span>噴出壓力範圍</span><span class="val" id="r4">--</span></div>
            <div class="res"><span>噴降範圍(2%~15%)</span><span class="val" id="r5">--</span></div>
            <div class="res hi"><b>回座判定範圍</b><span class="val" id="r6" style="font-size:20px;">--</span></div>
        </div>
    </div>
    <script>
        function calc() {
            const ps = parseFloat(document.getElementById('ps').value);
            const pi = parseFloat(document.getElementById('pi').value);
            if (!isNaN(ps) && !isNaN(pi)) {
                document.getElementById('r1').innerText = (ps*0.97).toFixed(2) + "~" + (ps*1.03).toFixed(2);
                const op = (ps*0.1).toFixed(2); document.getElementById('r2').innerText = op;
                const rp = (pi+parseFloat(op)).toFixed(2); document.getElementById('r3').innerText = rp;
                document.getElementById('r4').innerText = pi.toFixed(2) + "~" + rp;
                const bMin = (ps*0.02).toFixed(2), bMax = (ps*0.15).toFixed(2);
                document.getElementById('r5').innerText = bMin + "~" + bMax;
                document.getElementById('r6').innerText = (pi-bMax).toFixed(2) + "~" + (pi-bMin).toFixed(2);
            }
        }
        window.onload = calc;
    </script>
</body>
</html>
